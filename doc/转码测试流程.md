## 转码测试流程



###  测试数据设计矩阵

| 测试类别            | 测试目的               | 数据特征/示例                                                | 验证重点                                                     |
| :------------------ | :--------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- |
| **A. 基础与编码**   | 验证转码逻辑和基本功能 | - **纯ASCII字符** - **EBCDIC特有字符** (`0x5A`等) - **多语言混合** (中文、特殊符号) | 1. 字符是否一一对应，无`�` 2. 字符宽度变化是否处理得当       |
| **B. 数据格式边界** | 验证CSV解析的健壮性    | - **字段含分隔符** (`"a,b"`) - **字段含换行符** (`"a\nb"`) - **超长字段** (超过10K字符) - **空字段/空行** (`,,` 或空行) | 1. 字段数是否恒定 2. 多行记录是否被误拆 3. 解析性能是否正常  |
| **C. 业务规则边界** | 验证业务逻辑正确性     | - **日期边界** (00010101, 99991231) - **金额极值** (超大数、小数位超长) - **代码枚举** (有效/无效代码) - **符号与空格** (前导/后导空格、负号) | 1. 类型转换是否正确 2. 业务约束是否满足 3. 去空格逻辑是否正确 |
| **D. 批量与性能**   | 验证大批量处理能力     | - **混合上述所有特征的1GB文件** - **记录数正好为批次大小倍数的文件** | 1. 内存是否稳定 2. 吞吐量是否符合预期 3. 多线程是否同步正确  |
| **E. 异常与容错**   | 验证程序健壮性         | - **错误编码混杂** (混入UTF-8片段) - **非法控制字符** (`0x00`, `0x1A`) - **文件截断** (模拟传输中断) - **错误引号配对** (`"unclosed`) | 1. 是否优雅失败并记录 2. 是否跳过坏行继续处理                |



###  特别注意事项（针对大型机数据）

- **EBCDIC控制字符**：大型机数据中可能包含`0x00`（空）、`0x25`（换行）等EBCDIC控制字符，它们在UTF-8中可能无直接对应。

- **压缩空格（EBCDIC常见）**：大型机字段常以空格填充，转码后需确认是保留这些空格，还是按业务规则`TRIM`掉。

- **数值表示**：确认大型机中的**打包十进制**（如COMP-3格式）在导出为CSV时已被正确转换为可读的字符串或数字，而不是二进制乱码。

  

### 💎 总结：你的测试数据工具箱

准备以下4个核心测试文件，即可覆盖绝大多数场景：

1. **basic_correctness.csv** (小)：包含所有正常业务场景的“快乐路径”数据。
2. **edge_cases.csv** (中)：系统性地包含B、C类中的所有边界情况，每条数据都有明确预期结果。
3. **large_performance.csv** (大， 1GB)：由edge_cases.csv重复扩增而成，用于压力测试。
4. **error_cases.csv** (小)：明确的错误数据，用于验证异常处理流程。




spring:
  # ==========================================
  # 1. 元数据库 (Dev 环境通常连接本地或测试库)
  # ==========================================
  datasource:
    url: jdbc:mysql://localtestdb:3316/test1?useSSL=false&useUnicode=true&characterEncoding=utf-8&serverTimezone=Asia/Shanghai&rewriteBatchedStatements=true&allowMultiQueries=true&tinyInt1isBit=false&yearIsDateType=false&allowPublicKeyRetrieval=true&connectTimeout=360000&socketTimeout=3600000&failOverReadOnly=false&failOverReadOnly=false&autoReconnect=true
    hikari:
      pool-name: DevMetaPool
      # 开发机通常只跑单实例，不需要太多连接
      maximum-pool-size: 10
      minimum-idle: 2
      connection-timeout: 30000
      idle-timeout: 600000

app:
  # ==========================================
  # 2. 线程池配置 (温和模式)
  # ==========================================
  executor:
    # --- 转码 ---
    # 开发机通常还要跑 IDE(IntelliJ), 浏览器等。
    # 给 2-4 个线程，保证有并发效果，但别把 CPU 占满导致鼠标卡顿。
    transcode:
      core-size: 2
      max-size: 4
      queue-capacity: 100

    # --- 装载 ---
    # 模拟并发入库。4 个线程足够测试多线程事务冲突和死锁问题。
    load:
      core-size: 4
      max-size: 4
      queue-capacity: 100

    # --- 验证 ---
    # 验证逻辑简单，2 个线程足够。
    verify:
      core-size: 2
      max-size: 2
      queue-capacity: 100

  # ==========================================
  # 3. 目标库连接池模板 (Dev)
  # ==========================================
  target-db-config:
    # 【数学题】
    # Load线程(4) + Verify线程(2) = 6 并发。
    # 稍微留点余量，给 10 个连接足够了。
    # 这样即使连接的是本地 Docker 里的 MySQL (默认最大连接 151)，也毫无压力。
    max-pool-size: 10

    min-idle: 2
    connection-timeout: 30000

    # 依然保持生产环境的逻辑，方便测试代码路径
    auto-commit: false

  performance:
    read-buffer-size: 16777216  # 16MB (读取大文件建议加大)
    write-buffer-size: 2097152  # 2MB
    split-rows: 50000          # 多少行切分一个文件
    max-chars-per-column: 100000 # 防止某些超长备注导致OOM

logging:
  level:
    # 打印具体的 SQL 语句，方便看 rewriteBatchedStatements 是否生效
    com.example.moveprog.repository: INFO
    # 甚至打印 SQL 参数
    org.hibernate.SQL: INFO
    org.hibernate.type.descriptor.sql.BasicBinder: INFO